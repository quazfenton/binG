# ===========================================
# LLM PROVIDERS
# ===========================================

# OpenAI (optional - OpenRouter recommended)
#OPENAI_API_KEY=sk-your_openai_api_key_here
#OPENAI_BASE_URL=https://api.openai.com/v1

# OpenRouter (recommended - access to multiple models)
OPENROUTER_API_KEY=sk-or-your_openrouter_api_key_here
#OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Google Gemini
GOOGLE_API_KEY=your_google_api_key_here

# Anthropic Claude
#ANTHROPIC_API_KEY=your_anthropic_api_key_here
#ANTHROPIC_BASE_URL=https://api.anthropic.com/v1

# Mistral AI
#MISTRAL_API_KEY=your_mistral_api_key_here
#MISTRAL_BASE_URL=https://api.mistral.ai/v1

# GitHub Models (via Azure)
#GITHUB_MODELS_API_KEY=your_github_models_api_key_here
#GITHUB_MODELS_BASE_URL=https://models.inference.ai.azure.com

# Alternative: Use Azure OpenAI credentials
#AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
#GITHUB_MODELS_BASE_URL=https://models.inference.ai.azure.com

# Cohere
#COHERE_API_KEY=your_cohere_api_key_here

# Together AI
#TOGETHER_API_KEY=your_together_api_key_here

# Replicate
#REPLICATE_API_TOKEN=your_replicate_api_token_here

# Portkey AI Gateway
#PORTKEY_API_KEY=your_portkey_api_key_here
#PORTKEY_BASE_URL=https://api.portkey.ai/v1

# Chutes AI
#CHUTES_API_KEY=your_chutes_api_key_here
#CHUTES_BASE_URL=https://llm.chutes.ai/v1

# OpenCode API (Zen and Kimi 2.5)
#OPENCODE_API_KEY=your_opencode_api_key_here
#OPENCODE_BASE_URL=https://api.opencode.ai/v1

# ===========================================
# TASK-SPECIFIC PROVIDERS (Optional)
# ===========================================
# Use different providers optimized for specific tasks
# Leave empty to use DEFAULT_LLM_PROVIDER

#CHAT_PROVIDER=  # Chat completions (default: openrouter)
#CODE_PROVIDER=  # Code generation/review (default: openrouter)
#EMBEDDING_PROVIDER=mistral  # Embeddings (mistral-embed is excellent)
#IMAGE_PROVIDER=  # Image analysis/generation
#TOOL_PROVIDER=  # Tool/function calling
#TOOL_HANDLER=auto  # Tool service routing preference: auto | composio-tools | tool-execution
#AGENT_PROVIDER=mistral  # Agent completions (Mistral has great agent support)
#OCR_PROVIDER=mistral  # OCR processing (Mistral has OCR API)

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================

# Default LLM settings
DEFAULT_LLM_PROVIDER=openrouter  # Default provider
DEFAULT_MODEL=deepseek/deepseek-r1-0528:free  # Default model
DEFAULT_TEMPERATURE=0.7  # Creativity (0.0 - 2.0)
DEFAULT_MAX_TOKENS=80000  # Response length limit

# Logging Configuration
# Set to 'silent' to disable all logs, 'error' for errors only, 'warn' for warnings, 'info' for info, 'debug' for all
LOG_LEVEL=info

# Feature flags
ENABLE_VOICE_FEATURES=false  # Voice integration
ENABLE_IMAGE_GENERATION=false  # Image generation features
ENABLE_CHAT_HISTORY=true  # Chat history persistence
ENABLE_CODE_EXECUTION=false  # Code execution capabilities

# Application settings
NODE_ENV=development  # development, production
PORT=3000  # Server port
# Optional: explicit dev auth bypass (default is OFF)
#NEXT_PUBLIC_SKIP_AUTH_IN_DEV=false



# ===========================================
# EMAIL VERIFICATION
# ===========================================

# Email Provider Selection (toggle-able)
# Options: brevo | mailersend | resend | sendgrid | smtp | auto
# - 'auto': Automatically selects first available provider (priority: brevo > mailersend > resend > sendgrid > smtp)
# - Explicit provider: Forces use of specific provider even if others are configured
EMAIL_PROVIDER=auto

# ===========================================
# BREVO (Recommended - Transactional Email API)
# ===========================================
# Get your API key from https://app.brevo.com/settings/keys/api
# Brevo offers both API and SMTP relay options:
# Quota: 300 emails/day (9000/month) free tier

# Option 1: Brevo API (recommended - full features)
BREVO_API_KEY=your_brevo_api_key_here

# Option 2: Brevo SMTP Relay (alternative)
# SMTP credentials from https://app.brevo.com/settings/smtp
#SMTP_HOST=smtp-relay.brevo.com
#SMTP_PORT=587
#SMTP_SECURE=false
#SMTP_USER=a2dd32001@smtp-brevo.com
#SMTP_PASS=your_brevo_smtp_password_here

# ===========================================
# MAILERSEND (Alternative - 100 emails/day)
# ===========================================
# Get your API key from https://www.mailersend.com/account/api
# Quota: 100 emails/day (3000/month) free tier
# Great alternative or fallback to Brevo

MAILERSEND_API_KEY=your_mailersend_api_key_here

# ===========================================
# RESEND (Alternative - Simplest Setup)
# ===========================================
# Get your API key from https://resend.com
#RESEND_API_KEY=re_your_resend_api_key_here

# ===========================================
# SENDGRID (Alternative)
# ===========================================
# Get your API key from https://sendgrid.com
#SENDGRID_API_KEY=your_sendgrid_api_key_here

# ===========================================
# SMTP (Generic - Works with any SMTP server)
# ===========================================
# Use with Brevo SMTP Relay, Gmail, or any SMTP server
#SMTP_HOST=smtp.gmail.com
#SMTP_PORT=587
#SMTP_SECURE=false
#SMTP_USER=your_smtp_username
#SMTP_PASS=your_smtp_password

# ===========================================
# EMAIL SETTINGS (Common)
# ===========================================

# Default: Uses Brevo's default sender (noreply@<your-account>.brevo.com)
# Replace 'your-account' with your actual Brevo account subdomain
# Find it in Brevo dashboard: https://app.brevo.com/settings/senders
EMAIL_FROM=noreply@your-account.brevo.com

# To use custom domain instead:
# 1. Verify your domain in Brevo dashboard: https://app.brevo.com/settings/senders
# 2. Add DNS records (SPF, DKIM) as instructed by Brevo
# 3. Once verified, set EMAIL_FROM to your verified address (e.g., noreply@yourdomain.com)
# EMAIL_FROM=noreply@yourdomain.com

# Sender name shown in emails
EMAIL_FROM_NAME=binG

# Email verification settings
REQUIRE_EMAIL_VERIFICATION=true  # Set to 'true' to block login until email is verified
APP_NAME=binG

# ===========================================
# RATE LIMITING (Security & Abuse Prevention)
# ===========================================
# Configure rate limits for different endpoints to prevent brute-force and spam

# Login Rate Limit (strict - prevents brute-force attacks)
# Default: 5 attempts per 15 minutes per email/IP
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_LOGIN_WINDOW_MS=900000

# Registration Rate Limit (moderate - prevents spam accounts)
# Default: 3 registrations per hour per email/IP
RATE_LIMIT_REGISTER_MAX=3
RATE_LIMIT_REGISTER_WINDOW_MS=3600000

# Email Verification Rate Limit (lenient - allows legitimate retries)
# Default: 10 verification attempts per hour per IP
RATE_LIMIT_VERIFY_MAX=10
RATE_LIMIT_VERIFY_WINDOW_MS=3600000

# Send Verification Email Rate Limit (strict - prevents email spam)
# Default: 3 emails per hour per email/IP
RATE_LIMIT_SEND_VERIFICATION_MAX=3
RATE_LIMIT_SEND_VERIFICATION_WINDOW_MS=3600000

# Password Reset Rate Limit (strict - prevents abuse)
# Default: 3 resets per hour per email/IP
RATE_LIMIT_PASSWORD_RESET_MAX=3
RATE_LIMIT_PASSWORD_RESET_WINDOW_MS=3600000

# Generic API Rate Limit (default for other endpoints)
# Default: 30 requests per minute per IP
RATE_LIMIT_GENERIC_MAX=30
RATE_LIMIT_GENERIC_WINDOW_MS=60000

# ===========================================
# EMAIL QUOTA MANAGEMENT
# ===========================================
# Track and limit email sending per provider to avoid overage charges
# Quotas reset on the 1st of each month automatically

# Brevo API Quota (300 emails/day = 9000/month free tier)
EMAIL_QUOTA_BREVO_MONTHLY=9000

# MailerSend Quota (100 emails/day = 3000/month free tier)
EMAIL_QUOTA_MAILERSEND_MONTHLY=3000

# Resend Quota (3000 emails/month free)
EMAIL_QUOTA_RESEND_MONTHLY=3000

# SendGrid Quota (100 emails/day = 3000/month)
EMAIL_QUOTA_SENDGRID_MONTHLY=3000

# SMTP Quota (typically high limits, depends on provider)
# For Brevo SMTP Relay: same as API (300/day = 9000/month)
# For other SMTP servers, set according to your provider's limits
EMAIL_QUOTA_SMTP_MONTHLY=10000

# Automatic failover when provider quota is hit
# Set to 'false' to disable automatic provider switching
EMAIL_AUTO_FAILOVER=true

# Quota persistence fallback file path (when DB unavailable)
EMAIL_QUOTA_FALLBACK_FILE_PATH=data/email-provider-quotas.json

# ===========================================
# TAMBO INTEGRATION
# ===========================================

NEXT_PUBLIC_TAMBO_ENABLED=false
NEXT_PUBLIC_TAMBO_API_KEY=your_NEXT_PUBLIC_TAMBO_API_KEY

# ===========================================
# VOICE INTEGRATION (Livekit)
# ===========================================

# Livekit credentials
LIVEKIT_API_KEY=your_livekit_api_key_here
LIVEKIT_API_SECRET=your_livekit_api_secret_here
LIVEKIT_URL=wss://your-livekit-server.livekit.cloud
NEXT_PUBLIC_LIVEKIT_URL=wss://your-livekit-server.livekit.cloud


# Server-side chat storage - stores conversations in database when enabled
# Requires: User authentication enabled
# Default: false (chats stored in localStorage only for privacy)
# Set to true to enable server-side persistence (useful for multi-device sync)

ENABLE_SERVER_CHAT_STORAGE=false
NEXT_PUBLIC_ENABLE_SERVER_CHAT_STORAGE=false



# ===========================================
# WORKFLOW INTEGRATION (n8n)
# ===========================================

# n8n integration
N8N_ENABLED=false
N8N_ENDPOINT=https://your-n8n-instance.com/webhook
N8N_API_KEY=your_n8n_api_key_here
N8N_TIMEOUT=60000
N8N_CHAINING=true
N8N_EXTERNAL=true
N8N_OPTIMIZATION=true
N8N_CLASSIFICATION=true
N8N_ITERATION=true

# Custom fallback service
CUSTOM_FALLBACK_ENABLED=false
CUSTOM_FALLBACK_ENDPOINT=https://your-custom-endpoint.com/api/chat
CUSTOM_FALLBACK_API_KEY=your_custom_fallback_api_key
CUSTOM_FALLBACK_TIMEOUT=30000

# ===========================================
# FAST AGENT INTEGRATION
# ===========================================

# Fast Agent settings
FAST_AGENT_ENABLED=false
FAST_AGENT_ENDPOINT=http://localhost:8080/api/chat
FAST_AGENT_API_KEY=your_fast_agent_api_key
FAST_AGENT_TIMEOUT=30000
FAST_AGENT_FALLBACK=true
FAST_AGENT_PROVIDERS=openai,anthropic,google
FAST_AGENT_TOOLS=true
FAST_AGENT_FILES=true
FAST_AGENT_CHAINING=true
FAST_AGENT_MCP=true
FAST_AGENT_QUALITY=true
FAST_AGENT_REFLECTION=true
FAST_AGENT_STEPS=true
FAST_AGENT_MULTIMODAL=true
FAST_AGENT_QUALITY_MODE=enhanced
FAST_AGENT_REFLECTION_ENABLED=true
FAST_AGENT_MAX_ITERATIONS=3
FAST_AGENT_QUALITY_THRESHOLD=0.8
FAST_AGENT_COMPLEXITY_DETECTION=true
FAST_AGENT_ADAPTIVE_TIMEOUT=true
FAST_AGENT_PARALLEL=true
FAST_AGENT_STEP_BREAKDOWN=true
FAST_AGENT_LEARNING_ENABLED=true
FAST_AGENT_ADAPTATION_RATE=0.1
FAST_AGENT_LOADING_STATES=true
FAST_AGENT_MESSAGE_ROTATION=3000
FAST_AGENT_SHOW_PROGRESS=true
FAST_AGENT_SHOW_ESTIMATES=true
FAST_AGENT_CONTEXTUAL_MESSAGES=true

# ===========================================
# REFLECTION ENGINE
# ===========================================

FAST_AGENT_REFLECTION_THREADS=3
FAST_AGENT_REFLECTION_THRESHOLD=0.8
FAST_AGENT_REFLECTION_TIMEOUT=15000

# ===========================================
# DATABASE & STORAGE
# ===========================================

# Database configuration
DATABASE_PATH=data/binG.db

# Encryption key for API credentials (generate with: openssl rand -hex 32)
ENCRYPTION_KEY=your-64-char-hex-encryption-key-here-generate-with-openss

# JWT Secret (for authentication) - SECURITY CRITICAL: JWT_SECRET MUST BE CHANGED to a cryptographically secure random secret of minimum 32 bytes/characters, must never be committed to source control, and should be generated using a secure RNG and rotated periodically. Store in a secrets manager or CI/CD secret store.
JWT_SECRET=your-32-char-secret-key-here-change-this


# Cloud storage (AWS S3)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# MinIO configuration
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=your_minio_access_key
MINIO_SECRET_KEY=your_minio_secret_key

# ===========================================
# CLOUD & DEPLOYMENT
# ===========================================

# DigitalOcean VPS deployment
DIGITALOCEAN_API_TOKEN=your_digitalocean_api_token

# Cloudflare Workers
CLOUDFLARE_WORKER_URL=https://your-worker.your-subdomain.workers.dev
WORKER_AUTH_TOKEN=your_worker_auth_token

# Application URL
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ===========================================
# NEXTCLOUD INTEGRATION
# ===========================================

NEXTCLOUD_URL=https://your-nextcloud-instance.com
NEXTCLOUD_USERNAME=your_nextcloud_username
NEXTCLOUD_PASSWORD=your_nextcloud_password

# ===========================================
# COMPOSIO INTEGRATION (800+ Tools)
# ===========================================

# Composio API credentials
COMPOSIO_API_KEY=your_composio_api_key_here
COMPOSIO_ENABLED=true

# Composio LLM settings (for tool routing)
COMPOSIO_LLM_PROVIDER=openrouter
COMPOSIO_LLM_MODEL=deepseek/deepseek-r1-0528:free

# Composio tool settings
COMPOSIO_ENABLE_ALL_TOOLS=true
#COMPOSIO_RESTRICTED_TOOLKITS=toolkit1,toolkit2  # Optional: restrict specific toolkits

# ===========================================
# SANDBOX / CODE EXECUTION
# ===========================================

# Sandbox provider (daytona, runloop, or microsandbox)
SANDBOX_PROVIDER=daytona
# Optional fallback provider when primary fails (e.g. Daytona quota/memory limits)
SANDBOX_ENABLE_FALLBACK=true
SANDBOX_FALLBACK_PROVIDER=microsandbox

# Daytona API credentials
DAYTONA_API_KEY=your_daytona_api_key_here

# Runloop API credentials (alternative to Daytona)
#RUNLOOP_API_KEY=your_runloop_api_key_here

# Sandbox configuration
SANDBOX_WARM_POOL=true
SANDBOX_WARM_POOL_SIZE=2
SANDBOX_WARM_POOL_CPU=1
SANDBOX_WARM_POOL_MEMORY=2
SANDBOX_WARM_POOL_RETRY_COOLDOWN_MS=300000
SANDBOX_PRELOAD_PACKAGES=true
SANDBOX_BASE_PACKAGES=git,curl,wget,nodejs,python3,pip
SANDBOX_EXTRA_PACKAGES_NODE=npm,yarn,pnpm
SANDBOX_EXTRA_PACKAGES_PYTHON=requests,numpy,pandas
SANDBOX_DEFAULT_CPU=1
SANDBOX_DEFAULT_MEMORY=2

# ==================================================
# PERSISTENT CACHE (Optional - speeds up sandbox creation)
# ==================================================
# Enable persistent cache volume for shared package storage
# Reduces sandbox creation time from ~10 min to ~2-3 min after first use
# Requires ~2GB storage per cache volume

# Enable/disable persistent cache (default: false)
SANDBOX_PERSISTENT_CACHE=false

# Cache volume name (shared across all sandboxes)
SANDBOX_CACHE_VOLUME_NAME=global-package-cache

# Cache volume size (adjust based on package needs)
# Recommended: 1GB (minimal), 2GB (recommended), 4GB (optimal)
SANDBOX_CACHE_SIZE=2GB

# ===========================================
# E2B SANDBOX PROVIDER
# ===========================================
# E2B provides secure cloud sandbox environments for code execution
# Get your API key from: https://e2b.dev/dashboard?tab=keys
# Free tier: 1000 hours/month, 512MB RAM, 2 vCPU

# E2B API Key (required for E2B provider)
E2B_API_KEY=e2b_your_api_key_here

# Default template for E2B sandboxes
# Options: base, go, rust, java, r, cpp
E2B_DEFAULT_TEMPLATE=base

# Default timeout in milliseconds (default: 5 minutes)
E2B_DEFAULT_TIMEOUT=300000

# E2B monthly quota (sandbox sessions)
# Free tier: 1000 hours/month
# Set to 0 to disable E2B provider
QUOTA_E2B_MONTHLY=1000

# ===========================================
# E2B DESKTOP (Computer Use Agent)
# ===========================================
# Desktop sandbox with Ubuntu + XFCE for GUI automation
# Requires @e2b/desktop package
# Use for computer use agents that interact with graphical interfaces

# Desktop timeout (default: 5 minutes)
E2B_DESKTOP_TIMEOUT=300000

# Default screen resolution [width, height]
E2B_DESKTOP_RESOLUTION_X=1024
E2B_DESKTOP_RESOLUTION_Y=720

# Default DPI (dots per inch)
E2B_DESKTOP_DPI=96

# Enable VNC streaming by default (for browser viewing)
E2B_DESKTOP_AUTO_STREAM=true

# ===========================================
# TOOL INTEGRATION (Arcade / Nango)
# ===========================================

# Arcade API credentials (for tool execution)
#ARCADE_API_KEY=your_arcade_api_key_here
#ARCADE_USER_ID_STRATEGY=email  # email (recommended with Arcade verifier) | id
#ARCADE_CUSTOM_VERIFIER_ENABLED=false
#ARCADE_CUSTOM_VERIFIER_URL=http://localhost:3000/api/auth/arcade/custom-verifier

# Nango API credentials (alternative to Arcade)
#NANGO_API_KEY=your_nango_api_key_here
#NANGO_HOST=https://api.nango.dev

# ===========================================
# AUTO RUN MIGRATIONS
# ===========================================

AUTO_RUN_MIGRATIONS=true

# ===========================================
# QUOTA PERSISTENCE FALLBACK
# ===========================================
# Local file backup for quota counters when DB writes fail.
# Quotas are merged additively with DB on restart.
QUOTA_FALLBACK_FILE_PATH=data/provider-quotas.json

# ===========================================
# SKIP DATABASE INIT (for builds)
# ===========================================

# Set to 1 to skip database initialization (useful for builds/serverless)
#SKIP_DB_INIT=1
